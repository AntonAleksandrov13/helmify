# Helmify
CLI tool to convert [kustomize](https://github.com/kubernetes-sigs/kustomize) output generated by 
[Operator-SDK](https://github.com/operator-framework/operator-sdk) to a [Helm](https://github.com/helm/helm) chart.

## Usage
Command accepts chart name as the first argument. If no chart name set, `"chart"` will be used as chart name. 

```cat test_data/kustomize.output | go run cmd/helmify/main.go mychart```

Will generate helm chart with name `mychart` form file `test_data/kustomize.output` representing output generated by
kustomize.

### Integrate to your Operator-SDK project
Tested with operator-sdk version: "v1.8.0".
1. Open `Makefile` in your operator project generated by Operator-SDK.
2. Add these lines to `Makefile`:
```makefile
HELMIFY = $(shell pwd)/bin/helmify
helmify:
	$(call go-get-tool,$(HELMIFY),github.com/arttor/helmify/cmd/helmify@v0.1.0)

helm: manifests kustomize helmify
	$(KUSTOMIZE) build config/default | $(HELMIFY)
```
3. Run `make helm` in project root. It will generate helm chart with name 'chart' in 'chart' directory.

### Available options
| name | description | sample |
| --- | --- | ------- |
| only | A comma-separated list of processed kubernetes resources.<br/>Useful if you want to update certain objects of existing chart.<br/>Supported values: `crd`,`deployment`,`rbac`. | `helmify -only=crd,rbac`|
| values | Set `false` if you don't want to update Helm `values.yaml`.<br/>The default value is `true`. Option may be useful if you don't want <br/>to lose comments or change item order in your `values.yaml`| `helmify -values=false` |

